如何实现容错服务器
通常方法是在主服务器启动后启动备用服务器，二者之间通过网络或其他方式进行同步，但信息量巨大，无法在远程服务器上实现
但同时也有另一种方法，同时启动两台机器（状态机），选中一台作为主服务器，运行期间，对主服务器接受的消息同时通过网络或共享内存传给另一台服务器，来实现二者的同步，这样可以大大节省需要传递的信息量，同时也可以在虚拟机上启动，可以实现集中化备份服务器
>状态机：状态机是一种抽象模型，用来描述系统在不同状态之间的切换过程，它由以下部分组成：
>1. 状态 (State)：系统在某一时刻所处的条件/模式。
>2. 事件 (Event) 或 输入 (Input)：触发状态转换的外部或内部因素。
>3. 转移 (Transition)：从一个状态切换到另一个状态的规则。
>4. 动作 (Action)（可选）：状态转换过程中执行的操作。

在具体的实现中，也会遇到一些问题
FT协议用于确保主从VM在遇到故障时可以切换一致，具体策略就是主vm有一个日志，从vm从主vm中取出日志依次执行，关键在于主vm输出时需要有一个等待状态，直到从vm确认日志后才能输出，旨在解决在输出时遇到故障等同步问题
>FT协议只能在单核cpu上使用，因为在单核cpu中指令流只有一条，非确定点容易捕捉，而在多核中，并发会增加非确定性，难以保存内存访问顺序
在主从vm切换时有时会遇到脑裂问题，就是一些网络或其它问题导致从vm认为主vm失败，要上前替换，但实际上主vm并未失败，导致同时有两个vm,解决方法是使用主从vm使用共享磁盘，两个对一个独占式变量定期发起访问，如果不能访问则自动下线
还有一些日志的流量调节，确保主vm和从vm对于日志处理的速率相近
尽管对于网络io的需求减少，但同时也做了一些网络io优化